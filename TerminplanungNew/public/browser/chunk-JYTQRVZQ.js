import{Ba as _,Da as c,Ea as k,K as g,L as b,Oa as i,Pa as l,ba as a,ea as p,ib as C,ja as h,lb as S,na as x,ob as s,pb as E,qb as v,ra as f,tb as w,ya as e,za as n}from"./chunk-YOL2WHRW.js";function D(u,r){if(u&1){let t=_();e(0,"tr")(1,"td"),i(2),n(),e(3,"td"),i(4),n(),e(5,"td"),i(6),n(),e(7,"td"),i(8),n(),e(9,"td"),i(10),n(),e(11,"td"),i(12),n(),e(13,"td")(14,"button",1),c("click",function(){let d=g(t).$implicit,m=k();return b(m.deleteBooking(d.id))}),i(15,"\u{1F5D1}\uFE0F"),n()()()}if(u&2){let t=r.$implicit;a(2),l(t.id),a(2),l(t.name),a(2),l(t.city),a(2),l(t.requestType),a(2),l(t.date),a(2),l(t.description)}}var A=class u{constructor(r,t){this.http=r;this.router=t}bookings=[];ngOnInit(){this.loadBookings()}loadBookings(){let r=localStorage.getItem("token"),t=new s({Authorization:`Bearer ${r}`});this.http.get("http://localhost:4000/api/admin/bookings",{headers:t}).subscribe({next:o=>this.bookings=o,error:o=>{console.error("Fehler beim Laden:",o),alert("\u063A\u064A\u0631 \u0645\u0635\u0631\u062D \u0644\u0643 \u0628\u0627\u0644\u062F\u062E\u0648\u0644. \u062D\u0627\u0648\u0644 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644 \u0645\u0631\u0629 \u0623\u062E\u0631\u0649.")}})}deleteBooking(r){let t=localStorage.getItem("token"),o=new s({Authorization:`Bearer ${t}`});confirm("\u0647\u0644 \u062A\u0631\u064A\u062F \u062D\u0630\u0641 \u0627\u0644\u062D\u062C\u0632")&&this.http.delete(`http://localhost:4000/api/admin/bookings/${r}`,{headers:o}).subscribe(()=>this.loadBookings())}logout(){localStorage.removeItem("token"),this.router.navigate(["/login"])}downloadCSV(){let r=localStorage.getItem("token"),t=new s({Authorization:`Bearer ${r}`});this.http.get("http://localhost:4000/api/admin/bookings/export",{headers:t,responseType:"blob"}).subscribe(o=>{let d=window.URL.createObjectURL(o),m=document.createElement("a");m.href=d,m.download="bookings_export.csv",m.click(),window.URL.revokeObjectURL(d)},o=>{console.error("Fehler beim Download:",o),alert("Fehler beim Herunterladen der CSV-Datei")})}static \u0275fac=function(t){return new(t||u)(p(E),p(w))};static \u0275cmp=h({type:u,selectors:[["app-admin"]],decls:26,vars:1,consts:[[1,"admin-container"],[3,"click"],[4,"ngFor","ngForOf"]],template:function(t,o){t&1&&(e(0,"div",0)(1,"h2"),i(2,"\u{1F4CB} \u0643\u0644 \u0627\u0644\u062D\u062C\u0648\u0632 "),n(),e(3,"table")(4,"thead")(5,"tr")(6,"th"),i(7,"\u0627\u0644\u0631\u0642\u0645"),n(),e(8,"th"),i(9,"\u0627\u0644\u0627\u0633\u0645"),n(),e(10,"th"),i(11,"\u0627\u0644\u0645\u062F\u064A\u0646\u0629"),n(),e(12,"th"),i(13,"\u0627\u0644\u0637\u0644\u0628"),n(),e(14,"th"),i(15,"\u0627\u0644\u062A\u0627\u0631\u064A\u062E"),n(),e(16,"th"),i(17,"\u0627\u0644\u0633\u0628\u0628"),n(),e(18,"th"),i(19,"\u062D\u0630\u0641"),n(),e(20,"button",1),c("click",function(){return o.logout()}),i(21,"Logout"),n(),e(22,"button",1),c("click",function(){return o.downloadCSV()}),i(23,"\u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0645\u0648\u0627\u0639\u064A\u062F"),n()()(),e(24,"tbody"),x(25,D,16,6,"tr",2),n()()()),t&2&&(a(25),f("ngForOf",o.bookings))},dependencies:[S,C,v],styles:[".admin-container[_ngcontent-%COMP%]{max-width:900px;margin:40px auto;padding:20px;background:#fdfdfd;border-radius:12px;box-shadow:0 0 12px #0000001a;font-family:sans-serif;direction:ltr}h2[_ngcontent-%COMP%]{margin-bottom:20px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;font-size:.95rem}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:8px 10px;text-align:left}th[_ngcontent-%COMP%]{background-color:#f4f4f4}button[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff;border:none;padding:5px 10px;border-radius:6px;cursor:pointer}"]})};export{A as AdminComponent};
