import{b as k,f as P,i as O,p as S}from"./chunk-KIZFRNTP.js";import{Da as C,Ea as _,Oa as s,Pa as x,Sa as d,Ta as u,Ua as c,ba as l,c as m,ea as g,ja as f,jb as w,lb as M,na as h,ra as b,tb as y,ya as r,za as i}from"./chunk-YOL2WHRW.js";function L(a,e){if(a&1&&(r(0,"p",5),s(1),i()),a&2){let n=_();l(),x(n.error)}}var A=class a{constructor(e){this.router=e}username="";password="";error=null;onLogin(){fetch("http://localhost:4000/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:this.username,password:this.password})}).then(e=>m(this,null,function*(){if(!e.ok){let n=yield e.json();throw this.error=n.error||"\u062E\u0637\u0623 \u0641\u064A \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644",new Error(this.error??"Unbekannter Fehler")}return e.json()})).then(e=>{e.token?(localStorage.setItem("token",e.token),this.router.navigate(["/admin"])):alert("\u0641\u0634\u0644 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644. \u062A\u062D\u0642\u0642 \u0645\u0646 \u0627\u0644\u0628\u064A\u0627\u0646\u0627\u062A.")}).catch(e=>{console.error(e),alert(this.error||"\u062D\u062F\u062B \u062E\u0637\u0623 \u0623\u062B\u0646\u0627\u0621 \u062A\u0633\u062C\u064A\u0644 \u0627\u0644\u062F\u062E\u0648\u0644.")})}static \u0275fac=function(n){return new(n||a)(g(y))};static \u0275cmp=f({type:a,selectors:[["app-login"]],decls:8,vars:3,consts:[[1,"login-box"],["placeholder","\u0627\u0633\u0645 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645",1,"input-field",3,"ngModelChange","ngModel"],["placeholder","\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631","type","password",1,"input-field",3,"ngModelChange","ngModel"],[1,"btn-submit",3,"click"],["class","error",4,"ngIf"],[1,"error"]],template:function(n,o){n&1&&(r(0,"div",0)(1,"h2"),s(2,"\u062A\u0633\u062C\u064A\u0644 \u062F\u062E\u0648\u0644 \u0627\u0644\u0645\u0634\u0631\u0641"),i(),r(3,"input",1),c("ngModelChange",function(t){return u(o.username,t)||(o.username=t),t}),i(),r(4,"input",2),c("ngModelChange",function(t){return u(o.password,t)||(o.password=t),t}),i(),r(5,"button",3),C("click",function(){return o.onLogin()}),s(6,"\u062F\u062E\u0648\u0644"),i(),h(7,L,2,1,"p",4),i()),n&2&&(l(3),d("ngModel",o.username),l(),d("ngModel",o.password),l(3),b("ngIf",o.error))},dependencies:[S,k,P,O,M,w],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,#2980b9,#6dd5fa);font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;direction:rtl;color:#2c3e50}.login-container[_ngcontent-%COMP%]{background:#f0f8ffcc;padding:30px 25px;border-radius:14px;box-shadow:0 6px 16px #0000001f;width:350px;text-align:center}.login-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:25px;font-weight:700;color:#34495e}label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:600;font-size:1.1rem;text-align:right;color:#34495e}.input-field[_ngcontent-%COMP%]{width:100%;padding:11px 14px;margin-bottom:22px;border-radius:8px;border:1.7px solid #ccc;font-size:1rem;transition:border-color .3s ease,box-shadow .3s ease;text-align:right;direction:rtl}.input-field[_ngcontent-%COMP%]:focus{outline:none;border-color:#3498db;box-shadow:0 0 8px #3498dbaa}.error[_ngcontent-%COMP%]{color:#e74c3c;font-size:.9rem;margin-bottom:18px;text-align:right}.btn-submit[_ngcontent-%COMP%]{width:100%;background-color:#2980b9;border:none;padding:14px 0;border-radius:10px;font-size:1.3rem;color:#fff;cursor:pointer;font-weight:700;transition:background-color .25s ease}.btn-submit[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1f6391}.btn-submit[_ngcontent-%COMP%]:disabled{background-color:#95a5a6;cursor:not-allowed}"]})};export{A as AdminLoginComponent};
