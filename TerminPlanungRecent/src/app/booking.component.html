<div class="booking-container">
  <div class="flag-container">
    <img src="assets/syrian-flag.jpg" alt="ุนูู ุณูุฑูุง" />
  </div>

  <h1>ุงูุฌูููุฑูุฉ ุงูุนุฑุจูุฉ ุงูุณูุฑูุฉ</h1>
  <h2>ูุญุงูุธุฉ {{ city === 'Aleppo' ? 'ุญูุจ' : city }}</h2>
  <p>ูุฑุฌู ููุก ุงููููุฐุฌ ูุญุฌุฒ ููุนุฏ</p>

  <!-- Fehlermeldungen anzeigen -->
  <div *ngIf="hasErrors" class="error-container">
    <div *ngFor="let error of errors" class="error">{{ error }}</div>
  </div>

  <form (ngSubmit)="onSubmit()" #bookingForm="ngForm">
    
    <!-- ููุน ุงูุทูุจ -->
    <label for="requestType">ููุน ุงูุทูุจ:</label>
    <select
      id="requestType"
      name="requestType"
      required
      [(ngModel)]="selectedRequest"
      (ngModelChange)="fetchBookedDates()"
      #requestType="ngModel"
      class="input-field"
    >
      <option value="" disabled>ุงุฎุชุฑ ููุน ุงูุทูุจ</option>
      <option value="ุงุฎุฑุงุฌ ูุซุงุฆู">ุฅุฎุฑุงุฌ ูุซุงุฆู</option>
      <option value="ุชุฌุฏูุฏ ูุซุงุฆู">ุชุฌุฏูุฏ ูุซุงุฆู</option>
      <option value="ุทูุจุงุช ุฃุฎุฑู">ุทูุจุงุช ุฃุฎุฑู</option>
    </select>

    <!-- ุงููุฏููุฉ -->
    <label for="city">ุงููุฏููุฉ:</label>
    <select
      id="city"
      name="city"
      required
      [(ngModel)]="city"
      (ngModelChange)="fetchBookedDates()"
      #cityRef="ngModel"
      class="input-field"
    >
      <option value="Aleppo">ุญูุจ</option>
    </select>

    <!-- ุงูุงุณู -->
    <label for="name">ุงูุงุณู ุงููุงูู:</label>
    <input
      type="text"
      id="name"
      name="name"
      required
      [(ngModel)]="name"
      #nameRef="ngModel"
      class="input-field"
      placeholder="ุฃุฏุฎู ุงุณูู ุงููุงูู"
    />

    <!-- ุงูุจุฑูุฏ ุงูุฅููุชุฑููู -->
    <label for="email">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู:</label>
    <input
      type="email"
      id="email"
      name="email"
      required
      [(ngModel)]="email"
      #emailRef="ngModel"
      class="input-field"
      placeholder="example@email.com"
    />

    <!-- ุงููุตู -->
    <label for="description">ูุตู ุงูุทูุจ:</label>
    <textarea
      id="description"
      name="description"
      rows="4"
      required
      [(ngModel)]="description"
      #descriptionRef="ngModel"
      class="input-field"
      placeholder="ุงูุชุจ ุชูุงุตูู ุทูุจู ููุง..."
    ></textarea>

    <!-- ุงูุชุงุฑูุฎ -->
    <mat-form-field appearance="fill" class="date-field">
      <mat-label>ุงุฎุชุฑ ุงูุชุงุฑูุฎ</mat-label>
      <input
        matInput
        [matDatepicker]="picker"
        [(ngModel)]="date"
        name="date"
        #dateRef="ngModel"
        required
        [matDatepickerFilter]="isDateSelectable"
        [class]="dateClass"
        readonly
      />
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
    </mat-form-field>

    <!-- Status-Anzeige -->
    <div *ngIf="date && selectedRequest" class="date-status">
      <span 
        [class]="isDateBooked(date, selectedRequest) ? 'status-booked' : 'status-available'"
        [innerHTML]="isDateBooked(date, selectedRequest) ? 
          '๐ด ูุฐุง ุงูููุนุฏ ูุญุฌูุฒ' : 
          'โ ุงูููุนุฏ ูุชุงุญ'"
      ></span>
    </div>

    <!-- Loading-Anzeige -->
    <div *ngIf="isSubmitting" class="loading">
      ุฌุงุฑู ุงูุญุฌุฒ... ูุฑุฌู ุงูุงูุชุธุงุฑ
    </div>

    <button 
      type="submit" 
      [disabled]="bookingForm.invalid || isSubmitting || hasErrors" 
      class="btn-submit"
      [class.loading]="isSubmitting"
    >
      {{ isSubmitting ? 'ุฌุงุฑู ุงูุญุฌุฒ...' : 'ุงุญุฌุฒ ุงูุขู' }}
    </button>
  </form>
</div>